# *Lab7* 通信机制

>  实习说明
>
> 本实习希望通过修改Nachos系统平台的底层源代码，达到“实现通信机制”的目标。

## 任务完成情况

|  Exercises  | Y/N  |
| :---------: | :--: |
| *Exercise1* | *Y*  |
| *Exercise2* | *Y*  |
| *Exercise3* | *Y*  |

## *Exercise1* 调研*Linux*中进程通信机制的实现

> [进程间通信*IPC* ——简书](https://www.jianshu.com/p/c1015f5ffa74)
>
> 每个进程各自有不同的用户地址空间，任何一个进程的全局变量在另一个进程中都看不到，所以进程之间要交换数据必须通过内核，在内核中开辟一块缓冲区，进程1把数据从用户空间拷到内核缓冲区，进程2再从内核缓冲区把数据读走，内核提供的这种机制称为进程间通信（*IPC*，*InterProcess* *Communication*）

*Linux*中进程通信的方式包括：管道，信号，消息队列，共享内存，信号量和套接字六种。

**管道**是一种半双工的通信机制，采用循环队列实现。管道包括有名管道和匿名管道两种，匿名管道在内存中开辟一个缓冲区，只能供父子或兄弟进程之间通信；而有名管道为了解决匿名管道的局限性，为管道赋予名字，有名管道可以支持两个无关进程之间的通信。

**信号**是软件层次上对中断的一种模拟，是一种异步通信方式，信号可以在用户空间和内核之间直接交互。

**消息队列**是存放在内核中的链表结构，用队列标识符表示。目前有*POSIX*和*System* *V*两种消息队列，后者被广泛使用。[延伸阅读：消息队列C语言的实践](https://link.jianshu.com/?t=http://blog.csdn.net/yang_yulei/article/details/19772649)

**共享内存**是内核维护的一片独立的内存区域，它允许多个进程进行读写，需要信号量机制来实现进程的同步和互斥。[延伸阅读：Linux支持的主要三种共享内存方式：*mmap*()系统调用、*Posix*共享内存，以及*System* *V*共享内存实践](https://link.jianshu.com/?t=http://www.cnblogs.com/linuxbug/p/4882776.html)

**信号量**是一种非负的资源计数器，用于进程对临界资源的同步和互斥。包括两个操作：*wakeup*()和*signal*()，AKA，*PV*操作。

**套接字**广泛用于网络通信，它支持客户/服务器之间不同的进程通信，套接字包括三个属性：域/端口号/协议类型。

> 其他参考资料
>
> [*Linux*进程间通信的几种方式总结--*linux*内核剖析（七）](https://blog.csdn.net/gatieme/article/details/50908749)

## *Exercise2* 为*Nachos*设计并实现一种线程/进程间通信机制

> 基于已完善的线程、调度、同步机制部分，选择*Linux*中的一种进程通信机制，在*Nachos*上实现。

我选择实现管道和消息队列。

##### 管道



## *Exercise3* 为实现的通信机制编写测试用例

 